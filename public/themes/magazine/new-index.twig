{% extends 'base.twig' %}

 {% block stylesheets %}
     {{ parent() }}
     <style>
         div.pager {
             text-align: center;
             margin: 1em 0;
         }

         div.pager span {
             display: inline-block;
             width: 1.8em;
             height: 1.8em;
             line-height: 1.8;
             text-align: center;
             cursor: pointer;
             background: #000;
             color: #fff;
             margin-right: 0.5em;
         }

         div.pager span.active {
             background: #F7CA78;
         }
     </style>
 {% endblock %}

{% block head_js %}
    <script type="application/ld+json">
	{
		"@context": "http://schema.org",
		"@type": "WebSite",
		"name" : "{{ site_title }}",
		"url": "{{ base_url }}",
		"potentialAction": {
		  "@type": "SearchAction",
		  "target": "{{ 'search'|link }}?q={q}",
		  "query-input": "required name=q"
		}
	}

    </script>
{% endblock %}

{% block content %}
    <div class="row fh5co-post-entry hfeed" itemscope itemtype="http://schema.org/Blog">
        {% for page in pages|sort_by("time")|reverse %}
            {% if page.meta.template == "single" %}
                <article class="col-lg-3 col-md-4 col-sm-6 col-xs- 12 animate-box hentry">
                    <figure>
                        {% if page_meta.thumbnail %}
                            <a href="{{ page_meta.url }}"><img src="{{ page_meta.thumbnail }}" alt="{{ page_meta.title }}"
                                                               class="img-responsive"></a>
                        {% endif %}
                    </figure>
                    <span class="fh5co-meta"><a
                                href="{{ base_url }}/categories?qc={{ page.meta.category }}">{{ page.meta.category }}</a></span>
                    <h2 class="fh5co-article-title entry-title"><a href="{{ page_meta.url }}">{{ page_meta.title }}</a></h2>
                    {% if page_meta.date %}
                        <span class="fh5co-meta fh5co-date">{{ page_meta.date|date(config.twig_date_format) }}</span>
                    {% endif %}
                </article>
            {% endif %}
        {% endfor %}
    </div>
{% endblock %}

{% block js %}
    <script>
        $(document).ready(function () {
            $('.fh5co-post-entry').each(function () {
                var currentPage = 0;
                var numPerPage = {{ config.numPerPage }};
                var $table = $(this);
                $table.bind('repaginate', function () {
                    $table.find('article').hide().slice(currentPage * numPerPage, (currentPage + 1) * numPerPage).show();
                });
                $table.trigger('repaginate');
                var numRows = $table.find('article').length;
                var numPages = Math.ceil(numRows / numPerPage);
                var $pager = $('<div class="pager"></div>');
                for (var page = 0; page < numPages; page++) {
                    $('<span class="page-number"></span>').text(page + 1).bind('click', {
                        newPage: page
                    }, function (event) {
                        currentPage = event.data['newPage'];
                        $table.trigger('repaginate');
                        $(this).addClass('active').siblings().removeClass('active');
                    }).appendTo($pager).addClass('clickable');
                }
                $pager.insertAfter($table).find('span.page-number:first').addClass('active');
            });
        });
    </script>
{% endblock %}
